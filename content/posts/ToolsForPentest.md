---
title: "Tools para Pentest"
date: 2020-07-15T15:02:31-03:00
draft: false
---

## NMAP
================

O Nmap (“Network Mapper”) é uma ferramenta de código aberto para exploração de rede e auditoria de segurança. Ela foi desenhada para escanear rapidamente redes amplas, embora funcione m contra hos iduais. O Nmap utiliza  IP em esta (raw) de m novadora para determina hos dis  na rede, quais serviços ( apl  ve hos cem sistemas operac ver est ue tipos de filtro de  fir uso outras características. o N nor  utilizado para audito seg adm e sistemas e red úti rot omo inventário d ger ser atu ados, e monitora disponibilidade de serviço.

Para cada caso de enumeração e circunstâncias, existe flags especificas para cada tipo de alvo, geralmente dou um scan superficial no inicio, e depois utilizo algo mais profundo. As flags que mais utilizo são as seguintes:

nmap -sV -sC -Pn -T4 -v -p- --min-rate=10000 <IP>

Também são muito utilizadas as flags abaixo desde o mais simples para um scan mais completo. 

Varredura de porta TCP SYN (padrão)
```sh
# nmap -sS 192.168.1.1 
```
Tentativas para determinar a versão do serviço em execução na porta
```sh
# nmap -sV 192.168.1.1 
```
Scan com scripts NSE padrão. Considerado útil para descoberta e segurança
```sh
# nmap -sC 192.168.1.1 
```
Desative a descoberta de host. Somente varredura de porta.
```sh
# nmap -Pn 192.168.1.1-5 
```
Scan agressivo (4) mais acelerado, utilizar somente quando você estiver em uma rede razoavelmente rápida e confiável.
```sh
# nmap -T4 192.168.1.1 
```
Aumente o nível de verbosidade (-v ou use -vv mais para obter um efeito maior)
```sh
# nmap -v 192.168.1.1 
```
Envie pacotes não mais lentos que <número> por segundo. (--min-rate)
```sh
# nmap --min-rate=1000 192.168.1.1 
```
Envie pacotes não mais rapidos que <número> por segundo. (--max-rate)
```sh
# nmap --max-rate=1000 192.168.1.1 
```
Efetua o handshake triplo do TCP. O Nmap solicita ao sistema operacional subjacente que estabeleça uma conexão com o destino na porta especificada. 
```sh
# nmap -sT 192.168.1
```
Envia um SYN TCP para ver se a porta de destino responde com um SYN ACK (porta aberta) ou um RST (porta fechada). Também conhecida como varredura semi-aberta, pois não conclui o handshake do TCP. Esse é o padrão para usuários root.
```sh
# nmap -sS 192.168.1
```
Realiza uma varredura UDP. Como o UDP não usa um handshake, um serviço escutando uma porta UDP pode não enviar nenhuma resposta. As portas que enviam uma resposta são exibidas como abertas. -sU (varredura UDP).
```sh
# nmap -sU 192.168.1.50
```
Ativa a detecção do SO.
```sh
# nmap -O 192.168.1.50
```
Quantos hosts ativos.
```sh
# nmap -sP 192.168.1.0/24
```
Script para automatizar o processo de Scan em hosts ativos, pode personalizar com suas flags favoritas.

`# nano maroto_scan.sh`

```sh
#!/bin/bash
echo "Insira o Range:"
read RANGE
nmap -sP $RANGE | grep for | cut -d " " -f5
echo "Isso aê"
```
Para tornar executável o script faça: 
```rust
# chmod +x maroto_scan.sh
```
```rust
>>Resumo

Porta aberta = SYN + ACK
Porta Fechada = RST

# hping3 --syn -c 1 -p 80 sitedeteste.com 
SYN ACK = Flag:SA 

# hping3 --syn -c 1 -p 8000 192.168.0.11
RST = Flag:RA ( reset ack )   
  
# nmap -sS -p 80 192.168.0.113 (sem ruidos)
# nmap -sV -p 80 192.168.0.113 (versoes dos serviços, porém bem barulhento)
# nmap -A 192.168.0.113 (full scan, ele vai utilizaar recursos do NMAP para filtrar o maxímo que conseguir)
```

## SEARCHSPLOIT
================

Searchsploit, é uma ferramenta de pesquisa de linha de comando do Exploit-DB que também permite que você leve uma cópia do Exploit Database com você, aonde quer que você vá. O SearchSploit oferece a capacidade de realizar pesquisas off-line detalhadas por meio de sua cópia do repositório com check-out local. Esse recurso é particularmente útil para avaliações de segurança em redes segregadas ou com falta de ar sem acesso à Internet. 

Com as informações dos serviços coletados acima pelo NMAP, seria maneiro procurar no searchsploit se este serviço contém alguma vulnerabilidade, procurando um exploit para ele. 

Neste caso podemos usar o searchsploit da seguinte maneira:

```sh
fpmatta@T-REX ~> searchsploit vsftpd
------------------------------------------- ---------------------------------
 Exploit Title                             |  Path
------------------------------------------- ---------------------------------
vsftpd 2.0.5 - 'CWD' (Authenticated) Remot | linux/dos/5814.pl
vsftpd 2.0.5 - 'deny_file' Option Remote D | windows/dos/31818.sh
vsftpd 2.0.5 - 'deny_file' Option Remote D | windows/dos/31819.pl
vsftpd 2.3.2 - Denial of Service           | linux/dos/16270.c
vsftpd 2.3.4 - Backdoor Command Execution  | unix/remote/17491.rb
------------------------------------------- ---------------------------------
```

## NIKTO
================

Examine o servidor da Web em busca de vulnerabilidades conhecidas, incluindo:

- Configurações incorretas de servidor e software
- Arquivos e programas padrão
- Arquivos e programas inseguros
- Servidores e programas desatualizados

Não é necessário fazer a instalação do mesmo pois ele é um script perl.

Ele vem nativo no kali, para atualizar recomendo baixar direto do git deles. 

`https://github.com/sullo/nikto`

```
git clone https://github.com/sullo/nikto
# Main script is in program/
cd nikto/program
# Run using the shebang interpreter
./nikto.pl -h http://www.example.com
# Run using perl (if you forget to chmod)
perl nikto.pl -h http://www.example.com
```
>> -h + alvo (por padrão setada porta 80)
>> -o posso gerar relatório em html ou txt, csv. 
>> -p posso setar as portas que quero separados por virgula. 

exemplo:
========
nikto -h 192.168.0.126 -p 8081, 443 -o scan.html

Toda vez que precisar rodar o nikto em diferentes diretorios do seu alvo, é necessário colocar o 'http' na frente. 

>>nikto -h http://192.168.0.126/files -p 8081, 443 -o scan.html
